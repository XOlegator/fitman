var myApp=new Framework7({modalTitle:"Personal trainer",init:!1,dynamicNavbar:!0}),path=window.location.href.replace("index.html",""),$$=Framework7.$,t=0,fLang="i18n/en_US.json",i18n=new Jed({locale_data:{messages:{"":{domain:"messages",lang:"en_US",plural_forms:"nplurals=2; plural=(n != 1);"},"some key":["some value"]}},domain:"messages"});console.log("\u041f\u0435\u0440\u0432\u044b\u0439 \u0440\u0430\u0437 \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0438\u0440\u0443\u0435\u043c \u0432\u0441\u0435 \u0438\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442\u044b \u0434\u043b\u044f \u043f\u0435\u0440\u0435\u0432\u043e\u0434\u0430");
Template7.registerHelper("_",function(c){return i18n.gettext(c)});Template7.registerHelper("ngettext",function(c,b,a){console.log("\u041f\u0435\u0440\u0435\u0432\u043e\u0434\u0438\u043c \u0441\u0442\u0440\u043e\u043a\u0443 \u0441 \u0447\u0438\u0441\u043b\u043e\u043c. msgid = "+c+"; plural = "+b+"; count = "+a);return i18n.translate(c).ifPlural(a,b).fetch(a)});
Date.prototype.toDateInputValue=function(){var c=new Date(this);c.setMinutes(this.getMinutes()-this.getTimezoneOffset());return c.toJSON().slice(0,10)};var messageDelay=3E3,curUnits="metric",bdSchema="";
$$.getJSON(path+"default/bd-schema.json",function(c){bdSchema=c;db.open(bdSchema).then(function(b){server=b;console.log("JSON.stringify(server)"+JSON.stringify(server));console.log("\u0418\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0438\u0440\u0443\u0435\u043c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443 index-2");myApp.onPageInit("index-2",function(a){server.settings.query().all().execute().then(function(a){console.log("\u041f\u043e\u043b\u0443\u0447\u0438\u043b\u0438 \u0441\u043f\u0438\u0441\u043e\u043a \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043a");
a.length?(console.log("\u0423\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u043c \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u043f\u043e \u0434\u0430\u043d\u043d\u044b\u043c \u0431\u0430\u0437\u044b: results[0].units = "+a[0].units+"; results[0].language = "+a[0].language),$$("#selectUnits").val(a[0].units),$$("#selectLang").val(a[0].language),$$("#selectColorThemes").val(a[0].colorTheme),$$("#selectLayoutThemes").val(a[0].layoutTheme),curUnits=a[0].units,$$("body").addClass("theme-"+
a[0].colorTheme),$$("body").addClass("layout-"+a[0].layoutTheme),"russian"===a[0].language?(console.log("\u0413\u043e\u0442\u043e\u0432\u0438\u043c\u0441\u044f \u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0440\u0443\u0441\u0441\u043a\u0438\u0439 \u044f\u0437\u044b\u043a\u043e\u0432\u043e\u0439 \u0444\u0430\u0439\u043b"),fLang="i18n/ru_RU.json"):"english"===a[0].language&&(console.log("\u0413\u043e\u0442\u043e\u0432\u0438\u043c\u0441\u044f \u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0430\u043d\u0433\u043b\u0438\u0439\u0441\u043a\u0438\u0439 \u044f\u0437\u044b\u043a\u043e\u0432\u043e\u0439 \u0444\u0430\u0439\u043b"),
fLang="i18n/en_US.json"),console.log("\u041f\u0435\u0440\u0435\u0445\u043e\u0434\u0438\u043c \u0432 \u0444\u0443\u043d\u043a\u0446\u0438\u044e \u043f\u0435\u0440\u0435\u0432\u043e\u0434\u0430 \u0441\u0442\u0440\u043e\u043a"),translate(fLang)):server.settings.add({units:"metric",language:"english",colorTheme:"orange",layoutTheme:"dark"}).then(function(a){console.log("\u0417\u0430\u043f\u0438\u0441\u0430\u043b\u0438 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u043f\u043e-\u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u0432 \u0431\u0430\u0437\u0443: "+
JSON.stringify(a));$$("#selectUnits").val("metric");curUnits="metric";$$("#selectLang").val("english");$$("#selectColorThemes").val("orange");$$("#selectLayoutThemes").val("dark");$$("body").addClass("theme-orange");$$("body").addClass("layout-dark");console.log("\u0413\u043e\u0442\u043e\u0432\u0438\u043c\u0441\u044f \u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0430\u043d\u0433\u043b\u0438\u0439\u0441\u043a\u0438\u0439 \u044f\u0437\u044b\u043a\u043e\u0432\u043e\u0439 \u0444\u0430\u0439\u043b");fLang=
"i18n/en_US.json";console.log("\u041f\u0435\u0440\u0435\u0445\u043e\u0434\u0438\u043c \u0432 \u0444\u0443\u043d\u043a\u0446\u0438\u044e \u043f\u0435\u0440\u0435\u0432\u043e\u0434\u0430 \u0441\u0442\u0440\u043e\u043a");translate(fLang)})})});console.log("\u0418\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0438\u0440\u0443\u0435\u043c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443 index-3");myApp.onPageInit("index-3",function(a){server.customers.query("name").all().execute().then(function(a){console.log("\u0424\u043e\u0440\u043c\u0438\u0440\u0443\u0435\u043c \u0441\u043f\u0438\u0441\u043e\u043a \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432");
updateListCustomers(a)})});console.log("\u0418\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0438\u0440\u0443\u0435\u043c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443 index-5");myApp.onPageInit("index-5",function(a){server.exerciseType.query("name").all().execute().then(function(a){console.log("\u0424\u043e\u0440\u043c\u0438\u0440\u0443\u0435\u043c \u0441\u043f\u0438\u0441\u043e\u043a \u0433\u0440\u0443\u043f\u043f \u0443\u043f\u0440\u0430\u0436\u043d\u0435\u043d\u0438\u0439");updateListExerciseType(a)})});
myApp.onPageInit("index-10",function(a){$$("#inputDateStartClasses").val((new Date).toDateInputValue())});myApp.init();console.log("\u0418\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f myApp \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0430")})});
function translate(c){$$.getJSON(path+c,function(b){console.log("\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u043b\u0438 \u043d\u043e\u0432\u044b\u0439 \u044f\u0437\u044b\u043a\u043e\u0432\u043e\u0439 \u0444\u0430\u0439\u043b! fLang = "+c);i18n=new Jed(b);console.log("i18n = "+JSON.stringify(i18n));$$(".app-text").each(function(){var a=Template7.compile($$(this).text())();$$(this).text(a)})})}
$$("#selectUnits").on("change",function(){console.log("\u0417\u0430\u0448\u043b\u0438 \u0432 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043a \u0435\u0434\u0438\u043d\u0438\u0446 \u0438\u0437\u043c\u0435\u0440\u0435\u043d\u0438\u044f: "+JSON.stringify($$(this).val()));server.settings.query().all().execute().then(function(c){console.log("\u041e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0435\u043c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0441\u0438\u0441\u0442\u0435\u043c\u044b \u0438\u0437\u043c\u0435\u0440\u0435\u043d\u0438\u0439");
var b=c[0].language,a=$$("#selectUnits").val(),d=c[0].colorTheme,g=c[0].layoutTheme;console.log("\u041d\u043e\u0432\u0430\u044f \u0441\u0438\u0441\u0442\u0435\u043c\u0430 \u0438\u0437\u043c\u0435\u0440\u0435\u043d\u0438\u0439: "+a);server.settings.update({id:parseInt(c[0].id),units:a,language:b,colorTheme:d,layoutTheme:g}).then(function(b){console.log("\u0417\u0430\u043f\u0438\u0441\u0430\u043b\u0438 \u043d\u043e\u0432\u044b\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0432 \u0431\u0430\u0437\u0443: "+
JSON.stringify(b));curUnits=a;console.log("\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u0441\u0438\u0441\u0442\u0435\u043c\u0430 \u0438\u0437\u043c\u0435\u0440\u0435\u043d\u0438\u044f \u0438\u0437\u043c\u0435\u043d\u0438\u043b\u0430\u0441\u044c!!! curUnits = "+curUnits)})})});
$$("#selectLang").on("change",function(){console.log("\u0417\u0430\u0448\u043b\u0438 \u0432 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043a \u044f\u0437\u044b\u043a\u0430");server.settings.query().all().execute().then(function(c){var b=$$("#selectLang").val();console.log("\u041d\u043e\u0432\u044b\u0439 \u044f\u0437\u044b\u043a \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430: "+b);var a=c[0].units,d=c[0].colorTheme,g=c[0].layoutTheme;
server.settings.update({id:parseInt(c[0].id),units:a,language:b,colorTheme:d,layoutTheme:g}).then(function(a){console.log("\u0417\u0430\u043f\u0438\u0441\u0430\u043b\u0438 \u043d\u043e\u0432\u044b\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0432 \u0431\u0430\u0437\u0443: "+JSON.stringify(a));myApp.addNotification({title:i18n.gettext("Saved"),hold:messageDelay,message:i18n.gettext("The changes will take effect after you restart!")})})})});
$$("#selectColorThemes").on("change",function(){console.log("\u0417\u0430\u0448\u043b\u0438 \u0432 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043a \u0446\u0432\u0435\u0442\u0430 \u0442\u0435\u043c\u044b \u043e\u0444\u043e\u0440\u043c\u043b\u0435\u043d\u0438\u044f: "+JSON.stringify($$(this).val()));server.settings.query().all().execute().then(function(c){console.log("\u041e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0435\u043c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0446\u0432\u0435\u0442\u0430 \u043e\u0444\u043e\u0440\u043c\u043b\u0435\u043d\u0438\u044f");
var b=c[0].language,a=c[0].units,d=$$("#selectColorThemes").val(),g=c[0].layoutTheme;$$("body").hasClass("theme-gray")?$$("body").removeClass("theme-gray"):$$("body").hasClass("theme-white")?$$("body").removeClass("theme-white"):$$("body").hasClass("theme-black")?$$("body").removeClass("theme-black"):$$("body").hasClass("theme-lightblue")?$$("body").removeClass("theme-lightblue"):$$("body").hasClass("theme-yellow")?$$("body").removeClass("theme-yellow"):$$("body").hasClass("theme-orange")?$$("body").removeClass("theme-orange"):
$$("body").hasClass("theme-pink")?$$("body").removeClass("theme-pink"):$$("body").hasClass("theme-blue")?$$("body").removeClass("theme-blue"):$$("body").hasClass("theme-green")?$$("body").removeClass("theme-green"):$$("body").hasClass("theme-red")&&$$("body").removeClass("theme-red");$$("body").addClass("theme-"+d);console.log("\u041d\u043e\u0432\u044b\u0439 \u0446\u0432\u0435\u0442 \u043e\u0444\u043e\u0440\u043c\u043b\u0435\u043d\u0438\u044f: "+d);server.settings.update({id:parseInt(c[0].id),units:a,
language:b,colorTheme:d,layoutTheme:g}).then(function(a){console.log("\u0417\u0430\u043f\u0438\u0441\u0430\u043b\u0438 \u043d\u043e\u0432\u044b\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0432 \u0431\u0430\u0437\u0443: "+JSON.stringify(a))})})});
$$("#selectLayoutThemes").on("change",function(){console.log("\u0417\u0430\u0448\u043b\u0438 \u0432 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043a \u0441\u0442\u0438\u043b\u044f \u0442\u0435\u043c\u044b \u043e\u0444\u043e\u0440\u043c\u043b\u0435\u043d\u0438\u044f: "+JSON.stringify($$(this).val()));server.settings.query().all().execute().then(function(c){console.log("\u041e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0435\u043c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0441\u0442\u0438\u043b\u044f \u0442\u0435\u043c\u044b \u043e\u0444\u043e\u0440\u043c\u043b\u0435\u043d\u0438\u044f");
var b=c[0].language,a=c[0].units,d=c[0].colorTheme,g=$$("#selectLayoutThemes").val();$$("body").hasClass("layout-dark")?$$("body").removeClass("layout-dark"):$$("body").hasClass("layout-white")&&$$("body").removeClass("layout-white");$$("body").addClass("layout-"+g);console.log("\u041d\u043e\u0432\u044b\u0439 \u0441\u0442\u0438\u043b\u044c \u043e\u0444\u043e\u0440\u043c\u043b\u0435\u043d\u0438\u044f: "+g);server.settings.update({id:parseInt(c[0].id),units:a,language:b,colorTheme:d,layoutTheme:g}).then(function(a){console.log("\u0417\u0430\u043f\u0438\u0441\u0430\u043b\u0438 \u043d\u043e\u0432\u044b\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0432 \u0431\u0430\u0437\u0443: "+
JSON.stringify(a))})})});
$$(".confirm-fill-demo").on("click",function(){myApp.confirm("Are you sure? It will erase all of your data!",function(){console.log(JSON.stringify(server));server.clear("workExercise");server.clear("schedule");server.clear("workout");server.clear("optionsExercises");server.clear("exercise");server.clear("exerciseType");server.clear("customers");console.log("\u041d\u0430\u0447\u0438\u043d\u0430\u0435\u043c \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0442\u044c \u0443\u043f\u0440\u0430\u0436\u043d\u0435\u043d\u0438\u044f");$$.getJSON(path+
"default/exercises.json",function(c){for(var b in c.exerciseType)server.exerciseType.add({id:c.exerciseType[b].id,name:c.exerciseType[b].name}).then(function(a){for(var b in c.exerciseType[parseInt(a[0].id)].exercises){var g=c.exerciseType[parseInt(a[0].id)].exercises[b].name,f=parseInt(c.exerciseType[parseInt(a[0].id)].exercises[b].id);server.exercise.add({id:f,name:g,type:parseInt(a[0].id),deleted:0}).then(function(a){})}for(var l in c.exerciseType[parseInt(a[0].id)].exercises)for(var k in c.exerciseType[parseInt(a[0].id)].exercises[l].options[0])c.exerciseType[parseInt(a[0].id)].exercises[l].options[0][k]&&
(f=c.exerciseType[parseInt(a[0].id)].exercises[l].id,server.optionsExercises.add({option:k,exerciseId:f}).then(function(a){console.log("\u0414\u043e\u0431\u0430\u0432\u0438\u043b\u0438 \u0432 \u0411\u0414 \u043d\u043e\u0432\u0443\u044e \u0441\u0432\u044f\u0437\u043a\u0443 \u0443\u043f\u0440\u0430\u0436\u043d\u0435\u043d\u0438\u044f \u0441 \u0430\u043a\u0442\u0438\u0432\u043d\u044b\u043c \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u043c: "+JSON.stringify(a))}))});server.exerciseType.query("name").all().distinct().execute().then(function(a){updateListExerciseType(a)})});
$$.getJSON(path+"default/customers.json",function(c){for(var b in c.customers)server.customers.add(c.customers[b]);server.customers.query("name").all().distinct().execute().then(function(a){updateListCustomers(a)})});myApp.alert("Enjoy your new demo data")})});
$$(".confirm-clean-db").on("click",function(){myApp.confirm(i18n.gettext("Are you sure? It will erase all of your data!"),function(){console.log("Start cleaning DB");server.clear("settings");server.clear("workExercise");server.clear("schedule");server.clear("workout");server.clear("optionsExercises");server.clear("exerciseType");server.clear("exercise");server.clear("customers");console.log("Reload pages data");updateListCustomers("");updateListExerciseType("");myApp.alert(i18n.gettext("Database is clean"))},
function(){})});$$(".confirm-create-db").on("click",function(){myApp.confirm(i18n.gettext("Are you sure?"),function(){db.open(bdSchema).then(function(c){server=c})})});$$(".confirm-remove-db").on("click",function(){myApp.confirm(i18n.gettext("Are you sure?"),function(){indexedDB.deleteDatabase("my-app");document.getElementById("ulListCustomers").innerHTML="";document.getElementById("forDeleteCustomers").innerHTML="";document.getElementById("ulListExerciseType").innerHTML=""})});
function emptyDataCustomer(){var c="",c='<div class="left">'+(' <a href="#view-3" class="tab-link app-text">'+i18n.gettext("Cancel")+"</a>"),c=c+"</div>"+('<div class="center app-text">'+i18n.gettext("Add customer")+"</div>"),c=c+'<div class="right">',c=c+('  <a href="#" class="tab-link app-text" style="display: none;" id="linkEditCustomer" onclick="addCustomer()">'+i18n.gettext("Save")+"</a>"),c=c+"</div>";document.getElementById("divEditCustomer").innerHTML=c;$$("#inputNewCustomer").val("");$$("#inputNewCustomer").removeAttr("data-item");
$$("#newCustomerComments").val("");console.log("\u0421\u043a\u0440\u044b\u0432\u0430\u0435\u043c \u043f\u043e\u043a\u0430\u0437 \u0444\u043e\u0442\u043a\u0438");$$("#photoCustomer").attr("src","");$$("#aCustomerPhoto").hide();$$("#photoCustomer").hide();$$("#pMesNoPhoto").show()}function emptyDataExercise(){$$("#inputNewExercise").val("");$$("#view-7a input").prop("checked",!1)}
function updateListCustomers(c){var b="",a="",d;for(d in c)value=c[d],b+="<li>",b+='  <a href="#view-10" class="tab-link item-link item-content" onclick="fillCustomerData('+value.id+')">',b+='    <div class="item-inner">',b+='      <div class="item-title">'+value.name+"</div>",b+="    </div>",b+="  </a>",b+="</li>",a+="<li>",a+='  <label class="label-checkbox item-content">',a+='    <div class="item-inner">',a+='      <div class="item-title">',a+='        <a href="#view-10" class="tab-link btn-right-top" onclick="fillCustomerData('+
value.id+')">'+value.name+"</a>",a+="      </div>",a+="    </div>",a+='    <input type="checkbox" name="inputCustomerForDelete" value="'+value.id+'">',a+='    <div class="item-media item-media-right">',a+='      <i class="icon icon-form-checkbox"></i>',a+="    </div>",a+="  </label>",a+="</li>";document.getElementById("ulListCustomers").innerHTML=b;document.getElementById("forDeleteCustomers").innerHTML=a;document.getElementById("badgeCountCustomers").innerHTML=c.length}
function addCustomer(){var c=$$("#inputNewCustomer").val(),b=c.replace(/<script[^>]*>[\S\s]*?<\/script[^>]*>/ig,""),c="",c=$$("input#inputDateStartClasses").val();c.replace(/<script[^>]*>[\S\s]*?<\/script[^>]*>/ig,"");(new Date).toISOString();c="";c=$$("#newCustomerComments").val();c=c.replace(/<script[^>]*>[\S\s]*?<\/script[^>]*>/ig,"");""!=b?(server.customers.add({name:b,photo:"",comments:c}).then(function(a){$$("#inputNewCustomer").attr("data-item",a[0].id);console.log("\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u043b\u0438 #inputNewCustomer data-item = "+
a[0].id)}),server.customers.query("name").all().distinct().execute().then(function(a){myApp.addNotification({title:i18n.gettext("Saved"),hold:messageDelay});$$("#aCustomerPhoto").show();updateListCustomers(a)})):myApp.addNotification({title:i18n.gettext("Error while adding"),hold:messageDelay,message:i18n.gettext("Nothing to add!")})}
function editCustomer(){var c=parseInt($$("#inputNewCustomer").data("item")),b=$$("#inputNewCustomer").val(),a=b.replace(/<script[^>]*>[\S\s]*?<\/script[^>]*>/ig,""),b="",b=$$("#newCustomerComments").val(),d=b.replace(/<script[^>]*>[\S\s]*?<\/script[^>]*>/ig,"");$$("#aCustomerPhoto").show();console.log("\u0421\u0435\u0439\u0447\u0430\u0441 \u0431\u0443\u0434\u0435\u043c \u043e\u0431\u043d\u043e\u0432\u043b\u044f\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435 \u043f\u043e \u043a\u043b\u0438\u0435\u043d\u0442\u0443 \u0441 id = "+
c);server.customers.get(c).then(function(b){a===b.name&&d===b.comments?myApp.addNotification({title:i18n.gettext("Nothing to save"),hold:messageDelay,message:i18n.gettext("New data already exist in database.")}):server.customers.update({id:c,name:a,comments:d,photo:b.photo}).then(function(a){console.log("\u041e\u0431\u043d\u043e\u0432\u0438\u043b\u0438 \u0434\u0430\u043d\u043d\u044b\u0435 \u043f\u043e \u043a\u043b\u0438\u0435\u043d\u0442\u0443: "+JSON.stringify(a));myApp.addNotification({title:i18n.gettext("Updated"),
hold:messageDelay})})})}
function removeCustomers(){myApp.confirm(i18n.gettext("Are you sure?"),function(){$$('input[name="inputCustomerForDelete"]:checked').each(function(){console.log("\u041f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u043c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0441 id = "+this.value);server.customers.get(parseInt(this.value)).then(function(c){console.log("\u041d\u0430\u0448\u043b\u0438 \u0443\u0434\u0430\u043b\u044f\u0435\u043c\u043e\u0433\u043e \u043a\u043b\u0438\u0435\u043d\u0442\u0430 \u0432 \u0431\u0430\u0437\u0435: "+JSON.stringify(c));
server.remove("customers",c.id).then(function(b){console.log("\u0423\u0434\u0430\u043b\u0438\u043b\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0441 id = "+c.id);console.log(JSON.stringify(b));server.customers.query("name").all().distinct().execute().then(function(a){console.log("\u041a\u043b\u0438\u0435\u043d\u0442\u044b \u043f\u043e\u0441\u043b\u0435 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f res2 = "+JSON.stringify(a));updateListCustomers(a)})});console.log("\u041f\u043e\u0434\u0447\u0438\u0449\u0430\u0435\u043c \u0437\u0430 \u0443\u0434\u0430\u043b\u0451\u043d\u043d\u044b\u043c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u043c \u0441 id = "+
c.id);server.workout.query().filter("customer",c.id).execute().then(function(b){console.log("\u041d\u0430\u0448\u043b\u0438 \u0434\u0430\u043d\u043d\u044b\u0435 \u0434\u043b\u044f \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f resWorkout: "+JSON.stringify(b));for(var a in b)server.remove("workout",parseInt(b[a].id)).then(function(){console.log("\u0423\u0434\u0430\u043b\u0438\u043b\u0438 workout")})});server.schedule.query().filter("customer",c.id).execute().then(function(b){console.log("\u041d\u0430\u0448\u043b\u0438 \u0434\u0430\u043d\u043d\u044b\u0435 \u0434\u043b\u044f \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f resSchedule: "+
JSON.stringify(b));for(var a in b)server.remove("schedule",parseInt(b[a].id)).then(function(){console.log("\u0423\u0434\u0430\u043b\u0438\u043b\u0438 schedule")})});server.workExercise.query().filter("customer",c.id).execute().then(function(b){console.log("\u041d\u0430\u0448\u043b\u0438 \u0434\u0430\u043d\u043d\u044b\u0435 \u0434\u043b\u044f \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f resWorkExercise: "+JSON.stringify(b));for(var a in b)server.remove("workExercise",parseInt(b[a].id)).then(function(){console.log("\u0423\u0434\u0430\u043b\u0438\u043b\u0438 workExercise")})})})})},
function(){})}var myPhotoBrowserDark=myApp.photoBrowser({photos:[{url:"",caption:""}]});
function editPhoto(){console.log("\u0417\u0430\u0448\u043b\u0438 \u0432 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0444\u043e\u0442\u043a\u0438.");if(""!=$$("#inputNewCustomer").data("item")){var c=parseInt($$("#inputNewCustomer").data("item"));console.log("\u041a\u043e\u0434 \u043a\u043b\u0438\u0435\u043d\u0442\u0430 = "+c);navigator.camera.getPicture(function(b){console.log("\u041f\u043e\u043b\u0443\u0447\u0438\u043b\u0438 \u043f\u0443\u0442\u044c \u0444\u043e\u0442\u043a\u0438: "+b);
server.customers.get(c).then(function(a){server.customers.update({id:c,name:a.name,comments:a.comments,photo:b}).then(function(a){console.log("\u041e\u0431\u043d\u043e\u0432\u0438\u043b\u0438 \u0434\u0430\u043d\u043d\u044b\u0435 \u043f\u043e \u043a\u043b\u0438\u0435\u043d\u0442\u0443: "+JSON.stringify(a));$$("#photoCustomer").attr("src",b);$$("#photoCustomer").show();$$("#pMesNoPhoto").hide()})})},function(b){myApp.addNotification({title:i18n.gettext("Error"),message:b,hold:messageDelay})},{quality:45,
destinationType:Camera.DestinationType.FILE_URI,sourceType:Camera.PictureSourceType.PHOTOLIBRARY,mediaType:Camera.MediaType.PICTURE})}}
function fillCustomerData(c){var b="",b='<div class="left">'+(' <a href="#view-3" class="tab-link app-text">'+i18n.gettext("Cancel")+"</a>"),b=b+"</div>"+('<div class="center app-text">'+i18n.gettext("Edit customer")+"</div>"),b=b+'<div class="right">',b=b+('  <a href="#" class="tab-link app-text" style="display: none;" id="linkEditCustomer" onclick="editCustomer()">'+i18n.gettext("Save")+"</a>"),b=b+"</div>";document.getElementById("divEditCustomer").innerHTML=b;$$("#aCustomerPhoto").show();console.log("\u0417\u0430\u043f\u043e\u043b\u043d\u044f\u0435\u043c \u0434\u0430\u043d\u043d\u044b\u0435 \u043f\u043e \u043a\u043b\u0438\u0435\u043d\u0442\u0443 \u0441 id = "+
c);server.customers.get(parseInt(c)).then(function(a){$$("#inputNewCustomer").val(a.name);$$("#inputNewCustomer").attr("data-item",c);$$("#newCustomerComments").val(a.comments);a.photo?($$("#photoCustomer").attr("src",a.photo),$$("#photoCustomer").show(),$$("#pMesNoPhoto").hide(),$$("#aCustomerPhoto").html(i18n.gettext("Change photo")),myPhotoBrowserDark=myApp.photoBrowser({photos:[{url:a.photo,caption:a.name}]})):($$("#photoCustomer").hide(),$$("#pMesNoPhoto").show(),$$("#aCustomerPhoto").html(i18n.gettext("Add photo")))})}
function showEditLinkCustomer(){console.log("\u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u043c \u043a\u043d\u043e\u043f\u043a\u0443 Update");$$("#linkEditCustomer").show()}
function updateListExerciseType(c){var b="",a;for(a in c)value=c[a],b+="<li>",b+='  <div class="item-content">',b+='    <div class="item-inner">',b+='      <div class="item-media">',b+='        <a href="#view-7" class="tab-link" onclick="updateListExercises('+value.id+')"><i class="icon icon-form-settings"></i></a>',b+="      </div>",b+='      <div class="item-input">',b+='        <input type="text" placeholder="Exercise type" id="ex-compl-name-'+value.id+'" value="'+value.name+'" oninput="showRenameLinkExType('+
value.id+')">',b+="      </div>",b+='      <div class="item-input hidden" id="ex-compl-rename-'+value.id+'">',b+='        <a href="" class="button button-round" onclick="renameExType('+value.id+')">Rename</a>',b+="      </div>",b+='      <div class="item-input hidden" id="ex-compl-'+value.id+'">',b+='        <a href="" class="button button-round" onclick="deleteExType('+value.id+')">Delete</a>',b+="      </div>",b+='      <div class="item-media">',b+='        <label class="label-checkbox item-content">',
b+='          <input type="checkbox" name="ex-compl-'+value.id+'" class="btn-delete-toggle">',b+='          <div class="item-media">',b+='            <i class="icon icon-form-checkbox"></i>',b+="          </div>",b+="        </label>",b+="      </div>",b+="    </div>",b+="  </div>",b+="</li>";document.getElementById("ulListExerciseType").innerHTML=b}function showRenameLinkExType(c){$$("#ex-compl-rename-"+c).hasClass("hidden")&&$$("#ex-compl-rename-"+c).removeClass("hidden")}
function renameExType(c){var b=document.getElementById("ex-compl-name-"+c).value.replace(/<script[^>]*>[\S\s]*?<\/script[^>]*>/ig,"");server.exerciseType.update({id:parseInt(c),name:b}).then(function(a){console.log("\u041f\u0435\u0440\u0435\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u043d\u0430\u044f \u0433\u0440\u0443\u043f\u043f\u0430 \u0443\u043f\u0440\u0430\u0436\u043d\u0435\u043d\u0438\u0439 \u0432 \u0431\u0430\u0437\u0435: "+JSON.stringify(a));$$("#ex-compl-rename-"+c).hasClass("hidden")||
$$("#ex-compl-rename-"+c).addClass("hidden");myApp.addNotification({title:i18n.gettext("Successful rename"),hold:messageDelay,message:i18n.gettext("Group of exercises was renamed.")})})}
function updateListExercises(c){server.exerciseType.get(c).then(function(a){$$("div.ex-of-type").text(a.name);$$("div.ex-of-type").attr("data-item",c)});var b="";server.exercise.query("name").filter(function(a){return a.type==c&&0==a.deleted}).execute().then(function(a){console.log("\u041d\u0430\u0439\u0434\u0435\u043d\u043d\u044b\u0435 \u0443\u043f\u0440\u0430\u0436\u043d\u0435\u043d\u0438\u044f \u043f\u043e \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u043e\u043c\u0443 id "+c+" \u0433\u0440\u0443\u043f\u043f\u044b \u0443\u043f\u0440\u0430\u0436\u043d\u0435\u043d\u0438\u0439: results = "+
JSON.stringify(a));for(var d in a)rowExercise=a[d],b+="<li>",b+='  <div class="item-content">',b+='    <div class="item-inner">',b+='      <div class="item-input">',b+='        <input type="text" placeholder="Exercise" id="ex-name-'+rowExercise.id+'" value="'+rowExercise.name+'" oninput="showRenameLinkExercise('+rowExercise.id+')">',b+="      </div>",b+='      <div class="item-input hidden" id="ex-rename-'+rowExercise.id+'">',b+='        <a href="" class="button button-round" onclick="renameExercise('+
rowExercise.id+')">Rename</a>',b+="      </div>",b+='      <div class="item-media">',b+='        <a href="#view-8" class="tab-link button button-round" onclick="updateViewExProp('+rowExercise.id+')">Properties</a>',b+="      </div>",b+='      <div class="item-input hidden" id="ex-'+rowExercise.id+'">',b+='        <a href="" class="button button-round" onclick="deleteExercise('+rowExercise.id+')">Delete</a>',b+="      </div>",b+='      <div class="item-media">',b+='        <label class="label-checkbox item-content">',
b+='          <input type="checkbox" name="ex-'+rowExercise.id+'" class="btn-delete-toggle">',b+='          <div class="item-media">',b+='            <i class="icon icon-form-checkbox"></i>',b+="          </div>",b+="        </label>",b+="      </div>",b+="    </div>",b+="  </div>",b+="</li>";document.getElementById("ulListExercises").innerHTML=b})}function showRenameLinkExercise(c){$$("#ex-rename-"+c).hasClass("hidden")&&$$("#ex-rename-"+c).removeClass("hidden")}
function renameExercise(c){var b=document.getElementById("ex-name-"+c).value.replace(/<script[^>]*>[\S\s]*?<\/script[^>]*>/ig,"");console.log("newExName = "+b);server.exercise.get(c).then(function(a){server.exercise.update({id:parseInt(c),name:b,type:a.type,deleted:a.deleted}).then(function(a){console.log("\u041f\u0435\u0440\u0435\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u043d\u0430\u044f \u0433\u0440\u0443\u043f\u043f\u0430 \u0443\u043f\u0440\u0430\u0436\u043d\u0435\u043d\u0438\u0439 \u0432 \u0431\u0430\u0437\u0435: "+
JSON.stringify(a));$$("#ex-rename-"+c).hasClass("hidden")||($$("#ex-rename-"+c).addClass("hidden"),myApp.addNotification({title:i18n.gettext("Successful rename"),hold:messageDelay,message:i18n.gettext("Exercise was renamed.")}))})})}
function addExercise(){var c=$$("input#inputNewExercise").val().replace(/<script[^>]*>[\S\s]*?<\/script[^>]*>/ig,""),b=parseInt($$("div#view-7a div.ex-of-type").data("item"));console.log("\u0412\u044b\u0447\u0438\u0441\u043b\u0438\u043b\u0438 \u0433\u0440\u0443\u043f\u043f\u0443 \u0443\u043f\u0440\u0430\u0436\u043d\u0435\u043d\u0438\u0439 - \u044d\u0442\u043e "+b);""!=c&&server.exercise.query("name").filter("name",c).execute().then(function(a){a.length?myApp.addNotification({title:i18n.gettext("Can't be added"),
hold:messageDelay,message:i18n.gettext("The name already exist")}):server.exercise.add({name:c,type:b,deleted:0}).then(function(a){console.log("\u0414\u043e\u0431\u0430\u0432\u0438\u043b\u0438 \u043d\u043e\u0432\u043e\u0435 \u0443\u043f\u0440\u0430\u0436\u043d\u0435\u043d\u0438\u0435: "+JSON.stringify(a));$$('input[name="checkbox-new-ex-prop"]:checked').each(function(){server.optionsExercises.add({option:this.value,exerciseId:parseInt(a[0].id)}).then(function(a){console.log("\u0414\u043e\u0431\u0430\u0432\u0438\u043b\u0438 \u043d\u043e\u0432\u0443\u044e \u0441\u0432\u044f\u0437\u043a\u0443 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440-\u0443\u043f\u0440\u0430\u0436\u043d\u0435\u043d\u0438\u0435: "+
JSON.stringify(a))})});console.log("\u041f\u0435\u0440\u0435\u0434 \u043f\u043e\u0441\u0442\u0440\u043e\u0435\u043d\u0438\u0435\u043c \u0441\u043f\u0438\u0441\u043a\u0430 \u0443\u043f\u0440\u0430\u0436\u043d\u0435\u043d\u0438\u0439 \u043f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u043c \u0438\u0441\u043a\u043e\u043c\u0443 \u0433\u0440\u0443\u043f\u043f\u0443 - \u044d\u0442\u043e "+b);updateListExercises(b);$$('div.content-block-title a[href="#view-7"]').click()})})}
function deleteExercise(c){server.workExercise.query("exercise").filter("exercise",c).execute().then(function(b){b.length?server.exercise.get(c).then(function(a){server.exercise.update({id:c,name:a.name,type:a.type,deleted:1}).then(function(a){console.log("\u0423\u043f\u0440\u0430\u0436\u043d\u0435\u043d\u0438\u0435 \u043f\u043e\u0441\u043b\u0435 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f: "+JSON.stringify(a));a=parseInt($$("div#view-7a div.ex-of-type").data("item"));updateListExercises(a)})}):
(console.log("exercise \u0434\u043b\u044f \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f: "+c),server.optionsExercises.query().filter("exerciseId",c).execute().then(function(a){for(var b in a)server.remove("optionsExercises",a[b].id);server.remove("exercise",c).then(function(){var a=parseInt($$("div#view-7a div.ex-of-type").data("item"));updateListExercises(a)})}));server.schedule.query("exercise").filter("exercise",c).execute().then(function(a){console.log("\u041d\u0430\u0448\u043b\u0438\u0441\u044c \u0434\u0430\u043d\u043d\u044b\u0435 \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u044f: "+
JSON.stringify(a));for(var b in a)server.remove("schedule",a[b].id).then(function(){console.log("\u0417\u0430\u043f\u0438\u0441\u044c \u0438\u0437 \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u044f \u0443\u0434\u0430\u043b\u0438\u043b\u0438")})});console.log("\u0421\u0435\u0439\u0447\u0430\u0441 \u0431\u0443\u0434\u0435\u043c \u0438\u0441\u043a\u0430\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435 workout");server.workout.query("exercise").filter("exercise",c).execute().then(function(a){console.log("\u041d\u0430\u0448\u043b\u0438 \u0434\u0430\u043d\u043d\u044b\u0435 workout: "+
JSON.stringify(a));for(var b in a)server.remove("workout",a[b].id).then(function(){console.log("\u0423\u0434\u0430\u043b\u0438\u043b\u0438 \u0437\u0430\u043f\u0438\u0441\u044c \u0438\u0437 workout")})})})}
function updateViewExProp(c){console.log("\u0424\u043e\u0440\u043c\u0438\u0440\u0443\u0435\u043c \u0441\u043f\u0438\u0441\u043e\u043a \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a \u0434\u0430\u043d\u043d\u043e\u0433\u043e \u0443\u043f\u0440\u0430\u0436\u043d\u0435\u043d\u0438\u044f");$$("#view-8 input").prop("checked",!1);server.exercise.get(c).then(function(b){$$("#ex-prop").html(b.name).attr("data-item",c)});server.optionsExercises.query().filter("exerciseId",c).execute().then(function(b){console.log("\u0421\u043f\u0438\u0441\u043e\u043a \u043d\u0430\u0439\u0434\u0435\u043d\u043d\u044b\u0445 \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a \u043f\u043e \u0443\u043f\u0440\u0430\u0436\u043d\u0435\u043d\u0438\u044e: "+
JSON.stringify(b));for(var a in b)rowExOpt=b[a],console.log("rowExOpt.option = "+rowExOpt.option),$$('input[name="checkbox-ex-prop"][value="'+rowExOpt.option+'"]').attr("data-item",rowExOpt.id),$$('input[name="checkbox-ex-prop"][value="'+rowExOpt.option+'"]').prop("checked",!0)})}
function updateExerciseProperties(){var c=parseInt($$("#ex-prop").data("item"));console.log("\u0418\u0434\u0451\u0442 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432 \u0443\u043f\u0440\u0430\u0436\u043d\u0435\u043d\u0438\u044f \u0441 id = "+c);var b=[],a=[],d=[],g=[];$$('input[name="checkbox-ex-prop"]:checked').each(function(a,c){b[a]=c.value;console.log("\u0417\u0430\u043d\u0435\u0441\u043b\u0438 \u0432 \u043c\u0430\u0441\u0441\u0438\u0432 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0432\u044b\u0434\u0435\u043b\u0435\u043d\u043d\u043e\u0439 \u043e\u043f\u0446\u0438\u0438: "+
c.value)});server.optionsExercises.query().filter("exerciseId",c).execute().then(function(f){console.log("\u0421\u043f\u0438\u0441\u043e\u043a \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a: "+JSON.stringify(f));for(var l in f){var k=f[l];console.log("\u041e\u0447\u0435\u0440\u0435\u0434\u043d\u0430\u044f \u0441\u0442\u0440\u043e\u043a\u0430 \u0434\u043b\u044f \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f: "+JSON.stringify(k));
a[l]=k.option;in_array(k.option,b)||(console.log("\u042d\u043b\u0435\u043c\u0435\u043d\u0442 \u0443\u0434\u0430\u043b\u0438\u043b\u0438 \u043d\u0430 \u0444\u043e\u0440\u043c\u0435: "+k.option),d.push(k.option))}server.workExercise.query("option").filter(function(a){return in_array(a.option,d)&&a.exercise===c}).distinct().execute().then(function(a){console.log("\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 \u043f\u043e\u0438\u0441\u043a\u0430 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043d\u0435\u043b\u044c\u0437\u044f \u0443\u0434\u0430\u043b\u044f\u0442\u044c: "+
JSON.stringify(a));if(a.length)for(var b in a)console.log("\u0412 \u0431\u0430\u0437\u0435 \u0435\u0441\u0442\u044c \u0438\u0441\u0442\u043e\u0440\u0438\u044f \u043f\u043e \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0443 "+a[b].option),myApp.addNotification({title:i18n.gettext("Error while deleting"),hold:messageDelay,message:i18n.gettext("Option ")+a[b].option+i18n.gettext(" already used in database. It can&#39;t be deleted!")}),$$('input[name="checkbox-ex-prop"][value="'+a[b].option+'"]').prop("checked",
!1),delete d[d.indexOf(a[b].option)];for(var c in d)a=parseInt($$('input[name="checkbox-ex-prop"][value="'+d[c]+'"]').data("item")),console.log("idForDelete = "+a),server.remove("optionsExercises",a).then(function(a){console.log("resDel = "+a);a=$$('input[name="checkbox-ex-prop"][data-item="'+a+'"]').val();$$('input[name="checkbox-ex-prop"][value="'+a+'"]').removeAttr("data-item");console.log("nameDeletedParameter = "+a);myApp.addNotification({title:i18n.gettext("Saved"),hold:messageDelay,message:i18n.gettext("Parameter")+
" "+a+" "+i18n.gettext("was removed.")});console.log("\u0423\u0434\u0430\u043b\u0438\u043b\u0438 \u0441\u0432\u044f\u0437\u043a\u0443 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440: "+a)})});for(var e in b)in_array(b[e],a)||g.push(b[e]);for(var n in g)server.optionsExercises.add({option:g[n],exerciseId:c}).then(function(a){$$('input[name="checkbox-ex-prop"][value="'+a[0].option+'"]').attr("data-item",a[0].id);myApp.addNotification({title:i18n.gettext("Saved"),hold:messageDelay,message:i18n.gettext("Parameter")+
" "+a[0].option+" "+i18n.gettext("was added.")});console.log("\u0414\u043e\u0431\u0430\u0432\u0438\u043b\u0438 \u0441\u0432\u044f\u0437\u043a\u0443 \u043e\u043f\u0446\u0438\u044f-\u0443\u043f\u0440\u0430\u0436\u043d\u0435\u043d\u0438\u0435: "+JSON.stringify(a))});d.length||g.length||myApp.addNotification({title:i18n.gettext("Nothing to save"),hold:messageDelay,message:i18n.gettext("New set of options are equal to existent.")})})}
function addExType(){var c=$$("#inputNewExType").val().replace(/<script[^>]*>[\S\s]*?<\/script[^>]*>/ig,"");server.exerciseType.add({name:c}).then(function(b){server.exerciseType.query("name").all().distinct().execute().then(function(a){updateListExerciseType(a)});$$('a[href="#view-5"]').click()})}
function deleteExType(c){server.exercise.query("type").only(c).count().execute().then(function(b){b?myApp.addNotification({title:i18n.gettext("Can't be deleted"),hold:messageDelay,message:i18n.gettext("This item can not be delete while there are exercises in it.")}):server.remove("exerciseType",parseInt(c)).then(function(a){server.exerciseType.query("name").all().distinct().execute().then(function(a){updateListExerciseType(a)})})})}
$$(document).on("change",".btn-delete-toggle",function(){var c="#"+$$(this).attr("name");$$(c).toggleClass("hidden")});
function upgradeViewWorkout(){var c="",c='<a href="#view-10" class="button tab-link" id="aCancelSetEx">'+i18n.gettext("Cancel")+"</a>",c=c+('<a href="#tab1" class="button tab-link" onclick="makeCalendExCustomer()">'+i18n.gettext("Calendar")+"</a>"),c=c+('<a href="#tab2" class="button tab-link" onclick="makeScheduleExCustomer()">'+i18n.gettext("Schedule")+"</a>"),c=c+('<a href="#tab3" class="button tab-link" onclick="makeSetExCustomer()">'+i18n.gettext("Change")+"</a>");document.getElementById("divMenuWorkout").innerHTML=
c;document.getElementById("ulListCurrentExercises").innerHTML="";var b=0,c=$$("#inputNewCustomer").val().replace(/<script[^>]*>[\S\s]*?<\/script[^>]*>/ig,""),a=parseInt($$("#inputNewCustomer").data("item"));$$("#spanCustName").html(c).attr("data-item",a);var d=(new Date).toDateInputValue();$$("#spanDateEx").html(d);console.log("\u041a\u043b\u0438\u0435\u043d\u0442 "+c+", \u0434\u0430\u0442\u0430 "+d);server.workout.query().filter(function(b){return b.date===d&&b.customer===a}).execute().then(function(c){var d=
"";if(c.length){console.log("\u041d\u0430\u0448\u043b\u0438 \u0432 \u0431\u0430\u0437\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u043f\u043e \u0437\u0430\u043d\u044f\u0442\u0438\u044f\u043c \u043d\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f: "+JSON.stringify(c));for(var l in c){var k=c[l];console.log("\u041e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0435\u043c \u043f\u0435\u0440\u0432\u043e\u0435 \u0437\u0430\u043d\u044f\u0442\u0438\u0435 \u043d\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f. item = "+
JSON.stringify(k));server.exercise.get(k.exercise).then(function(a){console.log("\u0412\u043e\u0442, \u0447\u0442\u043e \u043d\u0430\u0448\u043b\u0438 \u043f\u043e \u0442\u0435\u043a\u0443\u0449\u0435\u043c\u0443 \u0443\u043f\u0440\u0430\u0436\u043d\u0435\u043d\u0438\u044e: "+JSON.stringify(a));var b=a.name;d+="<li>";d+='  <a href="#view-24" class="tab-link item-link item-content" onclick="makeViewExWork('+a.id+')">';d+='    <div class="item-inner">';d+='      <span data-item="'+a.id+'">'+b+"</span>";
d+="    </div>";d+="  </a>";d+="</li>";console.log("\u0421\u0435\u0439\u0447\u0430\u0441 \u0431\u0443\u0434\u0435\u043c \u0432\u044b\u0432\u043e\u0434\u0438\u0442\u044c \u043f\u043e\u0434\u0433\u043e\u0442\u043e\u0432\u043b\u0435\u043d\u043d\u044b\u0439 \u0441\u043f\u0438\u0441\u043e\u043a \u0443\u043f\u0440\u0430\u0436\u043d\u0435\u043d\u0438\u0439");$$(".noWorkout").hide();document.getElementById("ulListCurrentExercises").innerHTML=d});b=1}}else console.log("\u0421\u0435\u0433\u043e\u0434\u043d\u044f \u043a\u043e\u043c\u043f\u043b\u0435\u043a\u0441 \u0437\u0430\u043d\u044f\u0442\u0438\u0439 \u043d\u0435 \u0444\u043e\u0440\u043c\u0438\u0440\u043e\u0432\u0430\u043b\u0441\u044f, \u0437\u043d\u0430\u0447\u0438\u0442 \u043f\u0440\u043e\u0432\u0435\u0440\u044f\u043c \u043f\u043e \u0434\u043d\u044f\u043c \u043d\u0435\u0434\u0435\u043b\u0438"),
server.schedule.query().filter("customer",a).execute().then(function(a){if(a.length){console.log("\u041d\u0430\u0448\u043b\u0438 \u0432 \u0431\u0430\u0437\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u043f\u043e \u0437\u0430\u043d\u044f\u0442\u0438\u044f\u043c \u0434\u0430\u043d\u043d\u043e\u0433\u043e \u043a\u043b\u0438\u0435\u043d\u0442\u0430 \u043f\u043e \u0434\u043d\u044f\u043c \u043d\u0435\u0434\u0435\u043b\u0438");switch((new Date).getDay()){case 0:nameToday="sunday";break;case 1:nameToday="monday";
break;case 2:nameToday="tuesday";break;case 3:nameToday="wednesday";break;case 4:nameToday="thursday";break;case 5:nameToday="friday";break;case 6:nameToday="saturday"}console.log("\u0421\u0435\u0433\u043e\u0434\u043d\u044f: "+nameToday);for(var c in a)if(k=a[c],k.day===nameToday||"everyday"===k.day)server.exercise.get(k.exercise).then(function(a){var b=a.name;d+="<li>";d+='  <a href="#view-24" class="tab-link item-link item-content" onclick="makeViewExWork('+a.id+')">';d+='    <div class="item-inner">';
d+='      <span data-item="'+a.id+'">'+b+"</span>";d+="    </div>";d+="  </a>";d+="</li>";console.log("\u0421\u0435\u0439\u0447\u0430\u0441 \u0431\u0443\u0434\u0435\u043c \u0432\u044b\u0432\u043e\u0434\u0438\u0442\u044c \u043f\u043e\u0434\u0433\u043e\u0442\u043e\u0432\u043b\u0435\u043d\u043d\u044b\u0439 \u0441\u043f\u0438\u0441\u043e\u043a \u0443\u043f\u0440\u0430\u0436\u043d\u0435\u043d\u0438\u0439");$$(".noWorkout").hide();document.getElementById("ulListCurrentExercises").innerHTML=d}),b=1}});b||
$$(".noWorkout").show()});myApp.showTab("#tab0")}function in_array(c,b){for(var a=0;a<b.length;a++)if(b[a]==c)return!0;return!1}
function makeSetExCustomer(){var c="",c='<a href="#" class="button tab-link" onclick="makeSetExCustomer()" id="aClearAll">'+i18n.gettext("Clear all")+"</a>",c=c+('<a href="#tab1" class="button tab-link" onclick="makeCalendExCustomer()">'+i18n.gettext("Calendar")+"</a>"),c=c+('<a href="#tab2" class="button tab-link" onclick="makeScheduleExCustomer()">'+i18n.gettext("Schedule")+"</a>"),c=c+('<a href="#tab0" class="button tab-link" onclick="saveSetExCustomer(\'fromChange\')">'+i18n.gettext("Save")+"</a>");
document.getElementById("divMenuWorkout").innerHTML=c;$$("#ulListSelectedExercises").html("");var b="",a=[];$$("#ulListCurrentExercises li a div span").each(function(c,g){temp=g.innerHTML;console.log("\u0420\u0430\u0437\u0431\u043e\u0440 \u043e\u0447\u0435\u0440\u0435\u0434\u043d\u043e\u0439 \u043f\u043e\u0437\u0438\u0446\u0438\u0438 \u0443\u043f\u0440\u0430\u0436\u043d\u0435\u043d\u0438\u044f: "+JSON.stringify($$(this)));exerciseName=temp.replace(/<script[^>]*>[\S\s]*?<\/script[^>]*>/ig,"");var f=
parseInt($$(this).data("item"));a[c]=f;console.log("exerciseName = "+exerciseName);b+='<li class="swipeout swipeout-selected">';b+='  <div class="swipeout-content item-content">';b+='    <div class="item-inner">';b+='      <div class="item-title set-of-exercises" data-item="'+f+'">'+exerciseName+"</div>";b+="    </div>";b+="  </div>";b+='  <div class="swipeout-actions-left">';b+='    <a href="#" class="action1">Deleted</a>';b+="  </div>";b+="</li>"});$$("ul#ulListSelectedExercises").append(b);$$("#ulListAllExWithTypes").html("");
server.exerciseType.query("name").all().execute().then(function(b){console.log("\u0424\u043e\u0440\u043c\u0438\u0440\u0443\u0435\u043c \u0441\u043f\u0438\u0441\u043e\u043a \u0433\u0440\u0443\u043f\u043f \u0443\u043f\u0440\u0430\u0436\u043d\u0435\u043d\u0438\u0439");for(var c in b){var f=b[c].id,l=b[c].name;console.log("\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u0433\u0440\u0443\u043f\u043f\u0430 \u0443\u043f\u0440\u0430\u0436\u043d\u0435\u043d\u0438\u0439: "+l+" \u0441 id = "+f);$$("#ulListAllExWithTypes").append('<li class="item-divider" data-item="'+
f+'">'+l+"</li>");console.log("\u0414\u043e\u0431\u0430\u0432\u0438\u043b\u0438 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043e\u0447\u0435\u0440\u0435\u0434\u043d\u043e\u0439 \u0433\u0440\u0443\u043f\u043f\u044b \u0443\u043f\u0440\u0430\u0436\u043d\u0435\u043d\u0438\u0439: "+l+" \u0441 id = "+f)}server.exercise.query("name").filter(function(b){return 0==b.deleted&&!in_array(b.id,a)}).execute().then(function(a){console.log("exTypeId = "+f);console.log("\u0412\u0441\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043d\u044b\u0435 \u0443\u043f\u0440\u0430\u0436\u043d\u0435\u043d\u0438\u044f: "+
JSON.stringify(a));for(var b in a){var c=a[b].id,d=a[b].name,g=a[b].type,h="",h=h+'<li class="swipeout swipeout-all">',h=h+'  <div class="swipeout-content item-content">',h=h+'    <div class="item-inner">',h=h+('      <div class="item-title" data-item="'+c+'">'+d+"</div>"),h=h+"      </div>",h=h+"    </div>",h=h+"  </div>",h=h+'  <div class="swipeout-actions-right">',h=h+'    <a href="#" class="action1">Added</a>',h=h+"  </div>",h=h+"</li>";$$("#ulListAllExWithTypes").find('li.item-divider[data-item="'+
g+'"]').append(h)}a.length=0})})}
$$(document).on("opened",".swipeout-all",function(c){console.log("Item opened");myApp.swipeoutDelete(this);console.log($$(this).find("div.item-title").text());c=$$(this).find("div.item-title").text();var b="",a=$$(this).find("div.item-title").data("item");console.log("\u041e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u043b\u0438 id \u0441\u0432\u0430\u0439\u043f\u043d\u0443\u0442\u043e\u0433\u043e \u0443\u043f\u0440\u0430\u0436\u043d\u0435\u043d\u0438\u044f: "+a);b+='<li class="swipeout swipeout-selected">  <div class="swipeout-content item-content">';
b+='    <div class="item-inner">';b+='      <div class="item-title set-of-exercises" data-item="'+a+'">'+c+"</div>";b+="    </div>";b+="  </div>";b+='  <div class="swipeout-actions-left">';b+='    <a href="#" class="action1">Deleted</a>';b+="  </div>";b+="</li>";$$("ul#ulListSelectedExercises").append(b)});
$$(document).on("opened",".swipeout-selected",function(c){myApp.swipeoutDelete(this);console.log($$(this).find("div.item-title").text());c=$$(this).find("div.item-title").text();var b="",a=parseInt($$(this).find("div.item-title").data("item")),b=b+'<li class="swipeout swipeout-all">',b=b+'  <div class="swipeout-content item-content">',b=b+'    <div class="item-inner">',b=b+('      <div class="item-title" data-item="'+a+'">'+c+"</div>"),b=b+"      </div>",b=b+"    </div>",b=b+'    <div class="swipeout-actions-right">',
b=b+'      <a href="#" class="action1">Added</a>',b=b+"    </div>",b=b+"  </div>",b=b+"</li>";server.exercise.get(a).then(function(a){console.log("\u041d\u0430\u0448\u043b\u0438 \u0433\u0440\u0443\u043f\u043f\u0443 \u044d\u0442\u043e\u0433\u043e \u0443\u043f\u0440\u0430\u0436\u043d\u0435\u043d\u0438\u044f: "+a.type);$$("#ulListAllExWithTypes").find('li.item-divider[data-item="'+a.type+'"]').append(b)})});
function saveSetExCustomer(c){var b="",b='<a href="#view-10" class="button tab-link" id="aCancelSetEx">'+i18n.gettext("Cancel")+"</a>",b=b+('<a href="#tab1" class="button tab-link" onclick="makeCalendExCustomer()">'+i18n.gettext("Calendar")+"</a>"),b=b+('<a href="#tab2" class="button tab-link" onclick="makeScheduleExCustomer()">'+i18n.gettext("Schedule")+"</a>"),b=b+('<a href="#tab3" class="button tab-link" onclick="makeSetExCustomer()">'+i18n.gettext("Change")+"</a>");document.getElementById("divMenuWorkout").innerHTML=
b;console.log("\u0421\u043e\u0445\u0440\u0430\u043d\u044f\u0435\u043c \u043d\u0430\u0431\u043e\u0440");var a="",d="",g=parseInt($$("span#spanCustName").data("item")),f=$$("span#spanDateEx").text();server.workout.query().filter(function(a){return a.date===f&&a.customer===g}).execute().then(function(a){console.log("\u041d\u0430\u0448\u043b\u0438 \u0432 \u0431\u0430\u0437\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u043f\u043e \u0437\u0430\u043d\u044f\u0442\u0438\u044f\u043c \u043d\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f: "+
JSON.stringify(a));for(var b in a){var c=a[b];server.remove("workout",parseInt(c.id)).then(function(a){console.log("\u0423\u0434\u0430\u043b\u0438\u043b\u0438 workout \u0441 id = "+c.id);console.log(JSON.stringify(a))})}});"fromCalendar"===c?$$("#ulListPastExercises li span").each(function(b,c){a=c.innerHTML;var e=a.replace(/<script[^>]*>[\S\s]*?<\/script[^>]*>/ig,"");console.log("exerciseName = "+e+"; customerId = "+g+"; dateEx = "+f);console.log("\u0421\u043c\u043e\u0442\u0440\u0438\u043c \u0432 html \u0432 \u043f\u043e\u0438\u0441\u043a\u0430\u0445 id \u0443\u043f\u0440\u0430\u0436\u043d\u0435\u043d\u0438\u044f: "+
$$(this).data("item"));var n=parseInt($$(this).data("item"));server.workout.add({customer:g,date:f,exercise:n});d+="<li>";d+='  <a href="#view-24" class="tab-link item-link item-content" onclick="makeViewExWork('+n+')">';d+='    <div class="item-inner">';d+='      <span data-item="'+n+'">'+e+"</span>";d+="    </div>";d+="  </a>";d+="</li>";document.getElementById("ulListCurrentExercises").innerHTML=d}):$$("div.set-of-exercises").each(function(b,c){a=c.innerHTML;exerciseName=a.replace(/<script[^>]*>[\S\s]*?<\/script[^>]*>/ig,
"");console.log("exerciseName = "+exerciseName+"; customerId = "+g+"; dateEx = "+f);console.log("\u0421\u043c\u043e\u0442\u0440\u0438\u043c \u0432 html \u0432 \u043f\u043e\u0438\u0441\u043a\u0430\u0445 id \u0443\u043f\u0440\u0430\u0436\u043d\u0435\u043d\u0438\u044f: "+$$(this).data("item"));var e=parseInt($$(this).data("item"));server.workout.add({customer:g,date:f,exercise:e});d+="<li>";d+='  <a href="#view-24" class="tab-link item-link item-content" onclick="makeViewExWork('+e+')">';d+='    <div class="item-inner">';
d+='      <span data-item="'+e+'">'+exerciseName+"</span>";d+="    </div>";d+="  </a>";d+="</li>";document.getElementById("ulListCurrentExercises").innerHTML=d});$$(".noWorkout").hide()}function launcherTimer(){modalTimer();t=0;stopped(!1);myTimer()}myTimer.stopped=!1;function stopped(c){return myTimer.stopped=c}
function myTimer(){!0!==myTimer.stopped&&(document.getElementById("timer-minutes").innerHTML=parseInt(t/60),document.getElementById("timer-seconds").innerHTML=t-60*parseInt(t/60),console.log("t = "+t),t++,setTimeout("myTimer()",1E3))}
function modalTimer(){myApp.modal({title:i18n.gettext("Timer"),text:'<div><span id="timer-minutes">0</span>:<span id="timer-seconds">0</span></div>',buttons:[{text:i18n.gettext("Stop"),onClick:function(){stopped(!0);$$('input[data-item="time-minutes"]').val(parseInt($$("#timer-minutes").html()));$$('input[data-item="time-seconds"]').val(parseInt($$("#timer-seconds").html()))}},{text:i18n.gettext("Cancel"),bold:!0,onClick:function(){stopped(!0)}}]})}
function makeViewExWork(c){console.log("\u041f\u043e\u0434\u0433\u043e\u0442\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u043c \u043a \u0440\u0430\u0431\u043e\u0442\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443 \u0443\u043f\u0440\u0430\u0436\u043d\u0435\u043d\u0438\u044f \u0441 id = "+c);parseInt($$("#spanCustName").data("item"));var b=$$("#spanCustName").html().replace(/<script[^>]*>[\S\s]*?<\/script[^>]*>/ig,"");document.getElementById("spanWorkCustName").innerHTML=b;b=(new Date).toDateInputValue();
document.getElementById("spanWorkDateEx").innerHTML=b;server.exercise.get(c).then(function(a){document.getElementById("spanExWork").innerHTML=a.name;$$("#spanExWork").attr("data-item",c)});var a="",a=a+"<li>",a=a+'  <div class="item-content">',a=a+'    <div class="item-media"><i class="icon icon-form-settings"></i></div>',a=a+'    <div class="item-inner">',a=a+('      <div class="item-title label">'+i18n.gettext("Sets")+"</div>"),a=a+'      <div class="item-input">',a=a+'        <select data-item="sets">';
for(i=1;11>i;i++)a+="          <option>"+i+"</option>";a+="        </select>";a+="      </div>";a+="    </div>";a+="  </div>";a+="</li>";console.log("\u0418\u0434\u0451\u0442 \u043f\u043e\u0441\u0442\u0440\u043e\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432 \u0443\u043f\u0440\u0430\u0436\u043d\u0435\u043d\u0438\u044f \u0441 id = "+c);server.optionsExercises.query().filter("exerciseId",c).execute().then(function(b){console.log("\u0421\u043f\u0438\u0441\u043e\u043a \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a: "+
JSON.stringify(b));for(var c in b){var f=b[c];console.log("rowExOpt.option = "+f.option);if("time"===f.option)a+="<li>",a+='  <div class="item-content">',a+='    <div class="item-media"><i class="icon icon-form-settings"></i></div>',a+='    <div class="item-inner">',a+='      <div class="item-title label">'+i18n.gettext("Time")+"</div>",a+='      <div class="item-input">',a+='        <div class="row">',a+='          <div class="col-33"><input class="myInput" type="number" min="0" data-item="time-minutes" placeholder="'+
i18n.gettext("Minutes")+'"></div>',a+='          <div class="col-33"><input class="myInput" type="number" min="0" data-item="time-seconds" placeholder="'+i18n.gettext("Seconds")+'"></div>',a+='          <div class="col-33"><a href="#" class="button" onclick="launcherTimer()">'+i18n.gettext("Start timer")+"</a></div>",a+="        </div>",a+="      </div>",a+="    </div>",a+="  </div>",a+="</li>";else if("repeats"===f.option){a+="<li>";a+='  <div class="item-content">';a+='    <div class="item-media"><i class="icon icon-form-settings"></i></div>';
a+='    <div class="item-inner">';a+='      <div class="item-title label">'+i18n.gettext("Repeats")+"</div>";a+='      <div class="item-input">';a+='        <select class="myInput" data-item="repeats">';for(i=0;9>=i;i++)a+="          <option>"+i+"</option>";a+="        </select>";a+="      </div>";a+="    </div>";a+="  </div>";a+="</li>"}else if("incline"===f.option){a+="<li>";a+='  <div class="item-content">';a+='    <div class="item-media"><i class="icon icon-form-settings"></i></div>';a+='    <div class="item-inner">';
a+='      <div class="item-title label">'+i18n.gettext("Incline")+"</div>";a+='      <div class="item-input">';a+='        <select class="myInput" data-item="incline">';for(i=0;9>=i;i++)a+="          <option>"+i+"</option>";a+="        </select>";a+="      </div>";a+="    </div>";a+="  </div>";a+="</li>"}else"weight"===f.option?(a+="<li>",a+='  <div class="item-content">',a+='    <div class="item-media"><i class="icon icon-form-settings"></i></div>',a+='    <div class="item-inner">',a+='      <div class="item-title label">'+
i18n.gettext("Weight")+"</div>",a+='      <div class="item-input">',a+='        <input class="myInput" type="number" min="0" max="400" data-item="'+f.option+'" placeholder="'+i18n.gettext("Value")+'">',a+="      </div>",a+="    </div>",a+="  </div>",a+="</li>"):"distance"===f.option?(a+="<li>",a+='  <div class="item-content">',a+='    <div class="item-media"><i class="icon icon-form-settings"></i></div>',a+='    <div class="item-inner">',a+='      <div class="item-title label">'+i18n.gettext("Distance")+
"</div>",a+='      <div class="item-input">',a+='        <input class="myInput" type="number" min="0" max="100" data-item="'+f.option+'" placeholder="'+i18n.gettext("Value")+'">',a+="      </div>",a+="    </div>",a+="  </div>",a+="</li>"):"speed"===f.option?(a+="<li>",a+='  <div class="item-content">',a+='    <div class="item-media"><i class="icon icon-form-settings"></i></div>',a+='    <div class="item-inner">',a+='      <div class="item-title label">'+i18n.gettext("Speed")+"</div>",a+='      <div class="item-input">',
a+='        <input class="myInput" type="number" min="0" max="80" data-item="'+f.option+'" placeholder="'+i18n.gettext("Value")+'">',a+="      </div>",a+="    </div>",a+="  </div>",a+="</li>"):"resistance"===f.option&&(a+="<li>",a+='  <div class="item-content">',a+='    <div class="item-media"><i class="icon icon-form-settings"></i></div>',a+='    <div class="item-inner">',a+='      <div class="item-title label">'+i18n.gettext("Resistance")+"</div>",a+='      <div class="item-input">',a+='        <input class="myInput" type="number" min="0" data-item="'+
f.option+'" placeholder="'+i18n.gettext("Value")+'">',a+="      </div>",a+="    </div>",a+="  </div>",a+="</li>")}document.getElementById("ulListCurrentWorkEx").innerHTML=a})}
function saveExerciseWork(){var c=parseInt($$("span#spanCustName").data("item")),b=parseInt($$("#spanExWork").data("item")),a=$$("#spanDateEx").text(),d=parseInt($$('select[data-item="sets"]').val());server.workExercise.query().filter(function(g){return g.date==a&&g.exercise==b&&g.customer==c&&g.set==d}).execute().then(function(g){if(g.length)console.log("\u041f\u043e \u0442\u0435\u043a\u0443\u0449\u0435\u043c\u0443 \u0430\u043d\u0430\u043b\u0438\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u043c\u0443 \u0440\u0430\u0437\u0440\u0435\u0437\u0443 \u0443\u0436\u0435 \u0435\u0441\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435"),myApp.modal({title:i18n.gettext("Current set already exist in DB"),
text:i18n.gettext("What do you want to do with current values?"),buttons:[{text:i18n.gettext("Rewrite"),onClick:function(){var f=0;console.log("\u041c\u044b \u0432 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0435 \u043f\u0435\u0440\u0435\u0437\u0430\u043f\u0438\u0441\u0438 \u0434\u0430\u043d\u043d\u044b\u0445 \u043f\u043e \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044e \u0443\u043f\u0440\u0430\u0436\u043d\u0435\u043d\u0438\u044f");for(var m in g){var e=g[m];console.log("\u0412 \u0431\u0430\u0437\u0435 \u043d\u0430\u0448\u043b\u043e\u0441\u044c: item.option = "+
e.option+"; item.value = "+e.value);if("time"===e.option)var h=$$('#ulListCurrentWorkEx input[data-item = "time-minutes"]').val(),h=""==h?0:parseInt(h),r=$$('#ulListCurrentWorkEx input[data-item = "time-seconds"]').val(),r=(""==r?0:parseInt(r))+60*h;else"repeats"===e.option?h=parseInt($$('select[data-item="repeats"]').val()):"incline"===e.option?h=parseInt($$('select[data-item="incline"]').val()):(h=$$('#ulListCurrentWorkEx input[data-item = "'+e.option+'"]').val(),r=""==h?0:parseInt(h));server.workExercise.update({id:parseInt(e.id),
customer:c,date:a,exercise:b,option:e.option,value:r,set:d}).then(function(a){console.log("\u041e\u0431\u043d\u043e\u0432\u0438\u043b\u0438 \u043e\u0447\u0435\u0440\u0435\u0434\u043d\u0443\u044e \u0441\u0442\u0440\u043e\u043a\u0443 \u0432 \u0411\u0414: "+JSON.stringify(a));f++;1==f&&myApp.addNotification({title:i18n.gettext("Updated"),hold:messageDelay})})}}},{text:i18n.gettext("Cancel"),bold:!0,onClick:function(){}}]});else{console.log("\u041f\u043e \u0442\u0435\u043a\u0443\u0449\u0435\u043c\u0443 \u0430\u043d\u0430\u043b\u0438\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u043c\u0443 \u0440\u0430\u0437\u0440\u0435\u0437\u0443 \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e");
var f="",l=0,k=0,e=0;$$(".myInput").each(function(g,m){console.log("item.value = "+m.value+"; item.attributes[data-item].value = "+m.attributes["data-item"].value);f=m.attributes["data-item"].value;if("time-minutes"===f){k=1;var p=$$(this).val(),p=""==p?0:parseInt(p);l+=60*p}else"time-seconds"===f?(k=1,p=$$(this).val(),p=""==p?0:parseInt(p),l+=p):(p=$$(this).val(),console.log("tempValue = "+p),p=""==p?0:parseInt(p),console.log("\u041f\u0435\u0440\u0435\u0434 \u0437\u0430\u043f\u0438\u0441\u044c\u044e: customerId = "+
c+"; dateEx = "+a+"; exerciseId = "+b+"; option = "+f+"; intValue = "+p+"; workSet = "+d),server.workExercise.add({customer:c,date:a,exercise:b,option:f,value:p,set:d}).then(function(a){console.log("\u041f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u043c, \u0447\u0442\u043e \u0437\u0430\u043f\u0438\u0441\u0430\u043b\u0438: "+JSON.stringify(a));e++;1==e&&myApp.addNotification({title:i18n.gettext("Saved"),hold:messageDelay})}))});k&&(console.log("\u0414\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u043c \u0432\u0440\u0435\u043c\u044f \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0443\u043f\u0440\u0430\u0436\u043d\u0435\u043d\u0438\u044f \u0432 \u0431\u0430\u0437\u0443. time = "+
l),server.workExercise.add({customer:c,date:a,exercise:b,option:"time",value:l,set:d}).then(function(a){e++;1==e&&myApp.addNotification({title:i18n.gettext("Saved"),hold:messageDelay})}))}})}function makeCalDate(c){var b=c.getDate().toString(),a=1+c.getMonth();c=c.getFullYear().toString();2>b.length&&(b="0"+b);a=a.toString();2>a.length&&(a="0"+a);return c+"-"+a+"-"+b}
function makeCalendExCustomer(){var c="",c='<a href="#tab0" class="button tab-link" onclick="viewExSetCustomer()">'+i18n.gettext("Cancel")+"</a>",c=c+('<a href="#tab1" class="button tab-link active">'+i18n.gettext("Calendar")+"</a>"),c=c+('<a href="#tab2" class="button tab-link" onclick="makeScheduleExCustomer()">'+i18n.gettext("Schedule")+"</a>"),c=c+('<a href="#tab0" class="button tab-link" onclick="saveSetExCustomer(\'fromCalendar\')">'+i18n.gettext("Save")+"</a>");document.getElementById("divMenuWorkout").innerHTML=
c;$$("#ulListPastExercises").html("");console.log("\u041d\u0430\u0447\u0438\u043d\u0430\u0435\u043c \u043f\u043e\u0434\u0433\u0440\u0443\u0436\u0430\u0442\u044c \u043a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044c");c=parseInt($$("span#spanCustName").data("item"));server.workout.query().filter("customer",c).execute().then(function(b){var a=[],c="",g=0,f=[],l=$$("#spanDateEx").text(),k;for(k in b){var e=b[k],c=e.date;0==k?(a[0]=c,console.log("\u041f\u0435\u0440\u0432\u044b\u0439 \u0440\u0430\u0437. \u041d\u043e\u0432\u0430\u044f \u0434\u0430\u0442\u0430: "+
c),g=1):in_array(c,a)?g+=1:(a[g]=c,g=1,console.log("\u041d\u043e\u0432\u0430\u044f \u0434\u0430\u0442\u0430: "+c));f[c]=1<g?f[c]+"@#"+e.exercise:e.exercise}if(b.length&&in_array(l,a)){console.log("\u041e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0435\u043c \u0442\u0435\u043a\u0443\u0449\u0443\u044e \u0434\u0430\u0442\u0443 (\u043e\u043d\u0430 \u043d\u0430\u0448\u043b\u0430\u0441\u044c \u0432 \u0431\u0430\u0437\u0435 \u0434\u0430\u043d\u044b\u0445)!");console.log("arrWorkEx[dateEx] = "+
f[l]);b=f[l].split("@#");var n="";for(k in b)server.exercise.get(parseInt(b[k])).then(function(a){console.log("rowExercise.name = "+a.name);n+="<li>";n+='  <div class="item-link item-content">';n+='    <div class="item-inner">';n+='      <span data-item="'+a.id+'">'+a.name+"</span>";n+="    </div>";n+="  </div>";n+="</li>";document.getElementById("ulListPastExercises").innerHTML=n})}var m="January February March April May June July August September October November December".split(" ");document.getElementById("calendar-inline-container").innerHTML=
"";console.log(a[0]);var p=myApp.calendar({container:"#calendar-inline-container",value:[new Date],weekHeader:!1,toolbarTemplate:'<div class="toolbar calendar-custom-toolbar"><div class="toolbar-inner"><div class="left"><a href="#" class="link icon-only"><i class="icon icon-back"></i></a></div><div class="center"></div><div class="right"><a href="#" class="link icon-only"><i class="icon icon-forward"></i></a></div></div></div>',onOpen:function(a){$$(".calendar-custom-toolbar .center").text(m[a.currentMonth]+
", "+a.currentYear);$$(".calendar-custom-toolbar .left .link").on("click",function(){p.prevMonth()});$$(".calendar-custom-toolbar .right .link").on("click",function(){p.nextMonth()})},onMonthAdd:function(b,c){$$(c).find(".picker-calendar-day").each(function(){var b=$$(this),c=b.attr("data-date").split("-"),d=makeCalDate(new Date(c[0],c[1],c[2]));console.log("dateText = "+d);in_array(d,a)&&(console.log("\u0421\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0435 \u0434\u0430\u0442\u044b \u043d\u0430\u0439\u0434\u0435\u043d\u043e: "+
c),b.addClass("selected-day"))})},onMonthYearChangeStart:function(a){$$(".calendar-custom-toolbar .center").text(m[a.currentMonth]+", "+a.currentYear)},onDayClick:function(b,c,d,g,e){console.log("\u041d\u0430\u0436\u0430\u043b\u0438 \u043d\u0430 \u0434\u0430\u0442\u0443 "+d+"-"+(parseInt(g)+1)+"-"+e);c=makeCalDate(new Date(d,g,e));if(in_array(c,a)){console.log("\u041d\u0430 \u044d\u0442\u0443 \u0434\u0430\u0442\u0443 \u0435\u0441\u0442\u044c \u043a\u043e\u043c\u043f\u043b\u0435\u043a\u0441 \u0443\u043f\u0440\u0430\u0436\u043d\u0435\u043d\u0438\u0439!");
b=[];b=f[c].split("@#");var m="",k;for(k in b)c=b[k],console.log("\u041c\u044b \u0432 \u0446\u0438\u043a\u043b\u0435 \u043f\u043e \u043a\u043e\u0434\u0430\u043c \u0443\u043f\u0440\u0430\u0436\u043d\u0435\u043d\u0438\u0439. \u0422\u0435\u043a\u0443\u0449\u0430\u044f \u0441\u0442\u0440\u043e\u043a\u0430: "+c),server.exercise.get(parseInt(c)).then(function(a){m+="<li>";m+='  <div class="item-link item-content">';m+='    <div class="item-inner">';m+='      <span data-item="'+a.id+'">'+a.name+"</span>";
m+="    </div>";m+="  </div>";m+="</li>";console.log("listExCust = "+m);document.getElementById("ulListPastExercises").innerHTML=m;console.log("\u041e\u0431\u043d\u043e\u0432\u0438\u043b\u0438 \u043a\u043e\u043c\u043f\u043b\u0435\u043a\u0441 \u0443\u043f\u0440\u0430\u0436\u043d\u0435\u043d\u0438\u0439!")})}}})})}
function makeScheduleExCustomer(){var c="",c='<a href="#tab0" class="button tab-link" onclick="viewExSetCustomer()">'+i18n.gettext("Cancel")+"</a>",c=c+('<a href="#tab1" class="button tab-link" onclick="makeCalendExCustomer()">'+i18n.gettext("Calendar")+"</a>"),c=c+('<a href="#tab2" class="button tab-link active" onclick="makeScheduleExCustomer()">'+i18n.gettext("Schedule")+"</a>"),c=c+('<a href="#tab3" class="button tab-link" onclick="makeScheduleCustomer()">'+i18n.gettext("Save")+"</a>");document.getElementById("divMenuWorkout").innerHTML=
c;c=parseInt($$("span#spanCustName").data("item"));$$("#ulListDays li input").prop("checked",!1);$$("span#spanDateEx").text();var b=[];if($$("#ulListCurrentExercises li a div span")){var a="";$$("#ulListCurrentExercises li a div span").each(function(c,g){var f=g.innerHTML.replace(/<script[^>]*>[\S\s]*?<\/script[^>]*>/ig,""),l=parseInt($$(this).data("item"));b.push(l);a+="<li>";a+='  <div class="item-link item-content">';a+='    <div class="item-inner">';a+='      <span data-item="'+l+'">'+f+"</span>";
a+="    </div>";a+="  </div>";a+="</li>";document.getElementById("ulListScheduleEx").innerHTML=a});server.schedule.query("day").filter("customer",c).execute().then(function(a){var c=[],f=[],l=0,k=a.length;console.log("\u0420\u0430\u0437\u043c\u0435\u0440 \u043d\u0430\u0439\u0434\u0435\u043d\u043d\u043e\u0433\u043e \u043c\u0430\u0441\u0441\u0438\u0432\u0430 = "+k);for(var e in a){var n=a[e];c[e]=n.day;console.log("\u041f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u043c \u0434\u0435\u043d\u044c "+n.day);
console.log("index = "+e);l=parseInt(e)+1;console.log("num = "+l+"; count = "+k);0<e&&c[e]!=c[e-1]||l==k?(l==k&&(console.log("\u041d\u043e\u0432\u0430\u044f \u0437\u0430\u043f\u0438\u0441\u044c \u0442\u043e\u0433\u043e \u0436\u0435 \u0434\u043d\u044f (\u043f\u043e\u0441\u043b\u0435\u0434\u043d\u044f\u044f): "+n.exercise),f.push(n.exercise)),console.log("arrExForCheck.sort().toString() = "+f.sort().toString()),console.log("arrWorkEx.sort().toString() = "+b.sort().toString()),console.log("\u0421\u0432\u0435\u0440\u044f\u0435\u043c \u043d\u0430\u0431\u043e\u0440\u044b \u0443\u043f\u0440\u0430\u0436\u043d\u0435\u043d\u0438\u0439"),
f.sort().toString()===b.sort().toString()&&(console.log("\u041e\u0442\u043c\u0435\u0447\u0430\u0435\u043c \u0441\u043e\u0432\u043f\u0430\u0432\u0448\u0438\u0439 \u0434\u0435\u043d\u044c "+c[e-1]),$$('#ulListDays li input[value="'+c[e-1]+'"]').prop("checked",!0)),f.length=0):console.log("\u041d\u043e\u0432\u0430\u044f \u0437\u0430\u043f\u0438\u0441\u044c \u0442\u043e\u0433\u043e \u0436\u0435 \u0434\u043d\u044f: "+n.exercise);f.push(n.exercise)}})}server.schedule.query().filter("customer",c).execute().then(function(a){if(a.length){var b=
0,c=0,l=0,k=0,e=0,n=0,m=0,p=0,h;for(h in a)"sunday"===a[h].day?p++:"monday"===a[h].day?c++:"tuesday"===a[h].day?l++:"wednesday"===a[h].day?k++:"thursday"===a[h].day?e++:"friday"===a[h].day?n++:"saturday"===a[h].day?m++:"everyday"===a[h].day&&b++;$$('[id^="badgeCount"]').hide();p&&($$("#badgeCountSunday").html(i18n.sprintf(i18n.ngettext("There is one scheduled exercise","There are %d scheduled exercises",p),p)),$$("#badgeCountSunday").show());c&&($$("#badgeCountMonday").html(i18n.sprintf(i18n.ngettext("There is one scheduled exercise",
"There are %d scheduled exercises",c),c)),$$("#badgeCountMonday").show());l&&($$("#badgeCountTuesday").html(i18n.sprintf(i18n.ngettext("There is one scheduled exercise","There are %d scheduled exercises",l),l)),$$("#badgeCountTuesday").show());k&&($$("#badgeCountWednesday").html(i18n.sprintf(i18n.ngettext("There is one scheduled exercise","There are %d scheduled exercises",k),k)),$$("#badgeCountWednesday").show());e&&($$("#badgeCountThursday").html(i18n.sprintf(i18n.ngettext("There is one scheduled exercise",
"There are %d scheduled exercises",e),e)),$$("#badgeCountThursday").show());n&&($$("#badgeCountFriday").html(i18n.sprintf(i18n.ngettext("There is one scheduled exercise","There are %d scheduled exercises",n),n)),$$("#badgeCountFriday").show());m&&($$("#badgeCountSaturday").html(i18n.sprintf(i18n.ngettext("There is one scheduled exercise","There are %d scheduled exercises",m),m)),$$("#badgeCountSaturday").show());b&&($$("#badgeCountEveryday").html(i18n.sprintf(i18n.ngettext("There is one scheduled exercise",
"There are %d scheduled exercises",b),b)),$$("#badgeCountEveryday").show())}})}
function makeScheduleCustomer(){var c="",c='<a href="#tab0" class="button tab-link" onclick="viewExSetCustomer()">'+i18n.gettext("Cancel")+"</a>",c=c+('<a href="#tab1" class="button tab-link" onclick="makeCalendExCustomer()">'+i18n.gettext("Calendar")+"</a>"),c=c+('<a href="#tab2" class="button tab-link" onclick="makeScheduleExCustomer()">'+i18n.gettext("Schedule")+"</a>"),c=c+('<a href="#tab3" class="button tab-link" onclick="makeSetExCustomer()">'+i18n.gettext("Change")+"</a>");document.getElementById("divMenuWorkout").innerHTML=
c;console.log("\u0421\u043e\u0445\u0440\u0430\u043d\u044f\u0435\u043c \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435");var b=parseInt($$("span#spanCustName").data("item")),a=0,d=[];$$("#ulListDays input:checked").each(function(b,c){d.push($$(this).val());console.log("$$(this).val() = "+$$(this).val());"everyday"===$$(this).val()&&(a=1)});server.schedule.query().filter("customer",b).execute().then(function(c){for(var f in c){var l=c[f];(in_array(l.day,d)||a)&&server.remove("schedule",
parseInt(l.id))}for(var k in d)$$("#ulListScheduleEx span").each(function(){var a=parseInt($$(this).data("item"));console.log("\u041f\u043e\u043b\u0443\u0447\u0438\u043b\u0438 id \u0442\u0435\u043a\u0443\u0449\u0435\u0433\u043e \u0443\u043f\u0440\u0430\u0436\u043d\u0435\u043d\u0438\u044f: "+a);server.schedule.add({customer:b,day:d[k],exercise:a});console.log("\u0411\u044b\u043b\u0438 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u044b \u0442\u0430\u043a\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0435: customer = "+
b+"; day = "+d[k]+"; exerciseId = "+a)})})}
function viewExSetCustomer(){var c="",c='<a href="#view-10" class="button tab-link" id="aCancelSetEx">'+i18n.gettext("Cancel")+"</a>",c=c+('<a href="#tab1" class="button tab-link" onclick="makeCalendExCustomer()">'+i18n.gettext("Calendar")+"</a>"),c=c+('<a href="#tab2" class="button tab-link" onclick="makeScheduleExCustomer()">'+i18n.gettext("Schedule")+"</a>"),c=c+('<a href="#tab3" class="button tab-link" onclick="makeSetExCustomer()">'+i18n.gettext("Change")+"</a>");document.getElementById("divMenuWorkout").innerHTML=
c}
$$("#ulListDays li").click(function(){console.log('\u041a\u043b\u0438\u043a\u043d\u0443\u043b\u0438 \u043d\u0430 \u043e\u043f\u0446\u0438\u0438 $$(this).find("input").val() = '+$$(this).find("input").val());var c=$$(this).find("input").val();$$('#ulListDays input[value="'+c+'"]').prop("checked")&&("today"===c?(console.log("\u0412\u044b\u0434\u0435\u043b\u0438\u043b\u0438 \u0421\u0435\u0433\u043e\u0434\u043d\u044f"),$$('li[data-item="everyday"] input').prop("checked",!1),$$('li[data-item="week"] input').prop("checked",!1)):
"everyday"==c?(console.log("\u0412\u044b\u0434\u0435\u043b\u0438\u043b\u0438 \u041a\u0430\u0436\u0434\u044b\u0439 \u0434\u0435\u043d\u044c"),$$('li[data-item="today"] input').prop("checked",!1),$$('li[data-item="week"] input').prop("checked",!1)):(console.log("\u0412\u044b\u0434\u0435\u043b\u0438\u043b\u0438 \u043a\u0430\u043a\u043e\u0439-\u0442\u043e \u0434\u0435\u043d\u044c \u043d\u0435\u0434\u0435\u043b\u0438"),$$('li[data-item="today"] input').prop("checked",!1),$$('li[data-item="everyday"] input').prop("checked",
!1)))});
function generateHistory(){console.log("\u0424\u043e\u0440\u043c\u0438\u0440\u0443\u0435\u043c \u0431\u043b\u043e\u043a\u0438 \u0434\u0430\u043d\u043d\u044b\u0445 \u0434\u043b\u044f \u043f\u043e\u043a\u0430\u0437\u0430");$$("#linkSaveWorkEx").show();var c=parseInt($$("span#spanCustName").data("item"));$$("span#spanDateEx").text();var b=parseInt($$("#spanExWork").data("item")),a=0;server.optionsExercises.query().filter("exerciseId",b).execute().then(function(d){var g=d.length;console.log("\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0432\u0441\u0435\u0445 \u0441\u043e\u0431\u0440\u0430\u043d\u043d\u044b\u0445 \u0438\u0437 \u0411\u0414 \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a: "+g);
var f;f=""+('<span class="statistics-name">'+i18n.gettext("Sets")+"</span><br>");var l=0,k;for(k in d){var e=d[k];"repeats"===e.option?f+='<span class="statistics-name">'+i18n.gettext("Repeats")+"</span><br>":"weight"===e.option?f+='<span class="statistics-name">'+i18n.gettext("Weight")+"</span><br>":"time"===e.option?f+='<span class="statistics-name">'+i18n.gettext("Time")+"</span><br>":"distance"===e.option?f+='<span class="statistics-name">'+i18n.gettext("Distance")+"</span><br>":"speed"===e.option?
f+='<span class="statistics-name">'+i18n.gettext("Speed")+"</span><br>":"incline"===e.option?f+='<span class="statistics-name">'+i18n.gettext("Incline")+"</span><br>":"resistance"===e.option&&(f+='<span class="statistics-name">'+i18n.gettext("Resistance")+"</span><br>");l++;document.getElementById("divStatName").innerHTML=f}server.workExercise.query().filter(function(a){return a.exercise==b&&a.customer==c}).execute().then(function(b){console.log("\u041d\u0430\u0439\u0434\u0435\u043d\u043d\u044b\u0435 \u0431\u043b\u043e\u043a\u0438 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438: "+
JSON.stringify(b));console.log("\u041d\u0430\u0439\u0434\u0435\u043d\u043e \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0437\u0430\u043f\u0438\u0441\u0435\u0439 \u043f\u043e \u0443\u043f\u0440\u0430\u0436\u043d\u0435\u043d\u0438\u044e \u0438 \u043a\u043b\u0438\u0435\u043d\u0442\u0443: "+b.length);var c=b.length/g;console.log("amountBlock =  "+c);a=5>c?c:5;console.log("\u041e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u043b\u0438 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u043c\u044b\u0445 \u0431\u043b\u043e\u043a\u043e\u0432 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438: "+
a);console.log("\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u0441\u0438\u0441\u0442\u0435\u043c\u0430 \u0438\u0437\u043c\u0435\u0440\u0435\u043d\u0438\u044f curUnits = "+curUnits);var c="",d=0,f;for(f in b){var e=b[f];console.log("\u0412\u044b\u0432\u043e\u0434\u0438\u043c \u043f\u043e\u0441\u0442\u0440\u043e\u0447\u043d\u043e \u0432\u0441\u0451, \u0447\u0442\u043e \u043d\u0430\u0448\u043b\u043e\u0441\u044c: "+JSON.stringify(e));console.log("\u0421\u0447\u0438\u0442\u0430\u0435\u043c \u0438\u0442\u0435\u0440\u0430\u0446\u0438\u0438: i = "+
d);0===d&&(console.log("\u041e\u0442\u043a\u0440\u044b\u0432\u0430\u0435\u043c \u043d\u043e\u0432\u044b\u0439 \u0431\u043b\u043e\u043a"),c+='<div class="swiper-slide">',c+="<span>"+e.set+"</span>");if("metric"===curUnits)if("repeats"===e.option)c+="<br><span>"+e.value+"</span>";else if("weight"===e.option)c+="<br><span>"+e.value+" "+i18n.gettext("Kg")+"</span>";else if("time"===e.option)var k=parseInt(e.value/60),e=e.value-60*parseInt(e.value/60),c=c+("<br><span>"+k+":"+e+"</span>");else"distance"===
e.option?c+="<br><span>"+e.value+" "+i18n.gettext("Km")+"</span>":"speed"===e.option?c+="<br><span>"+e.value+" "+i18n.gettext("Km/h")+"</span>":"incline"===e.option?c+="<br><span>"+e.value+"</span>":"resistance"===e.option&&(c+="<br><span>"+e.value+" "+i18n.gettext("Kg")+"</span>");else"imperial"===curUnits&&("repeats"===e.option?c+="<br><span>"+e.value+"</span>":"weight"===e.option?c+="<br><span>"+e.value+" "+i18n.ngettext("Lb","Lb",e.value)+"</span>":"time"===e.option?(k=parseInt(e.value/60),e=
e.value-60*parseInt(e.value/60),c+="<br><span>"+k+":"+e+"</span>"):"distance"===e.option?c+="<br><span>"+e.value+" "+i18n.ngettext("Ml","Ml",e.value)+"</span>":"speed"===e.option?c+="<br><span>"+e.value+" "+i18n.ngettext("Ml/h","Ml/h",e.value)+"</span>":"incline"===e.option?c+="<br><span>"+e.value+"</span>":"resistance"===e.option&&(c+="<br><span>"+e.value+" "+i18n.ngettext("Lb","Lb",e.value)+"</span>"));d++;d===l&&(console.log("\u0417\u0430\u043a\u0440\u044b\u0432\u0430\u0435\u043c \u0431\u043b\u043e\u043a \u0438 \u043e\u0431\u043d\u0443\u043b\u044f\u0435\u043c \u0441\u0447\u0451\u0442\u0447\u0438\u043a."),
c+="</div>",d=0);console.log("\u0412\u044b\u0432\u043e\u0434\u0438\u043c \u0431\u043b\u043e\u043a \u043d\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443.");document.getElementById("divHistory").innerHTML=c}myApp.swiper(".swiper-stat",{freeMode:!0,spaceBetween:15,slidesPerView:a,grabCursor:!0,paginationHide:!1,paginationClickable:!0,nextButton:".swiper-button-next",prevButton:".swiper-button-prev"})})})}$$("#aWorkNote").on("click",function(){$$("#linkSaveWorkEx").show()});
$$("#aWorkHistory").on("click",function(){$$("#linkSaveWorkEx").hide()});
$$("#aWorkProgress").on("click",function(){$$("#linkSaveWorkEx").hide();var c=parseInt($$("#spanExWork").data("item")),b=parseInt($$("#spanCustName").data("item")),a=[],d=0;server.optionsExercises.query().filter("exerciseId",c).execute().then(function(g){for(var f in g)a[f]=g[f].option;var l=a.length;console.log("\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0432\u0441\u0435\u0445 \u0441\u043e\u0431\u0440\u0430\u043d\u043d\u044b\u0445 \u0438\u0437 \u0411\u0414 \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a: "+l);
console.log("\u0421\u043f\u0438\u0441\u043e\u043a \u0432\u0441\u0435\u0445 \u0441\u043e\u0431\u0440\u0430\u043d\u043d\u044b\u0445 \u0438\u0437 \u0411\u0414 \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a: "+JSON.stringify(a));server.workExercise.query().filter(function(a){return a.exercise===c&&a.customer===b}).execute().then(function(a){var b=0,c=[],f=[],g=[],h=[],r=[],u=[],v=[],w=[],x;for(x in a){var q=a[x];0===d&&(c[b]=q.date);console.log("item.option = "+q.option);
"repeats"===q.option?f[b]=q.value:"weight"===q.option?g[b]=q.value:"time"===q.option?h[b]=q.value/60:"distance"===q.option?r[b]=q.value:"speed"===q.option?u[b]=q.value:"incline"===q.option?v[b]=q.value:"resistance"===q.option&&(w[b]=q.value);d++;d===l&&(d=0,b++);console.log("\u041d\u043e\u043c\u0435\u0440 \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0438 \u0432 \u0442\u0435\u043a\u0443\u0449\u0435\u0439 \u0438\u0442\u0435\u0440\u0430\u0446\u0438\u0438: "+d)}a={labels:c,
series:[{name:i18n.gettext("Repeats"),data:f},{name:i18n.gettext("Weight"),data:g},{name:i18n.gettext("Time"),data:h},{name:i18n.gettext("Distance"),date:r},{name:i18n.gettext("Speed"),data:u},{name:i18n.gettext("Incline"),data:v},{name:i18n.gettext("Resistance"),data:w}]};console.log("\u0421\u043e\u0431\u0438\u0440\u0430\u0435\u043c \u0434\u0430\u043d\u043d\u044b\u0435 \u0432 \u043c\u0430\u0441\u0441\u0438\u0432\u044b \u0434\u043b\u044f \u043f\u043e\u043a\u0430\u0437\u0430 \u043d\u0430 \u0433\u0440\u0430\u0444\u0438\u043a\u0435.");
b={lineSmooth:Chartist.Interpolation.simple({divisor:2}),fullWidth:!0,chartPadding:{right:80}};console.log("\u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u043c \u0433\u0440\u0430\u0444\u0438\u043a.");new Chartist.Line(".ct-chart",a,b,[["screen and (max-width: 640px)",{seriesBarDistance:5,axisX:{labelInterpolationFnc:function(a){return a[0]}}}]]);$$(".ct-chart").on("click",".ct-point",function(a){a=$$(this);var b=a.attr("ct:value");a='<div class="popover"><div class="popover-inner"><div class="content-block"><p>'+
a.parent().attr("ct:series-name")+"</p><p>"+b+"</p></div></div></div>";myApp.popover(a,this)})})})});
function makeSliderSchedules(){var c=parseInt($$("#spanCustName").data("item")),b=$$("#spanCustName").html();$$("#spanCustNameSchedule").html(b).attr("data-item",c);var a=0,d=0,g=0,f=0,l=0,k=0,e=0,n=0,m='<div class="swiper-slide"><span class="my-title">'+i18n.gettext("Everyday")+"</span>",p='<div class="swiper-slide"><span class="my-title">'+i18n.gettext("Sunday")+"</span>",h='<div class="swiper-slide"><span class="my-title">'+i18n.gettext("Monday")+"</span>",r='<div class="swiper-slide"><span class="my-title">'+
i18n.gettext("Tuesday")+"</span>",u='<div class="swiper-slide"><span class="my-title">'+i18n.gettext("Wednesday")+"</span>",v='<div class="swiper-slide"><span class="my-title">'+i18n.gettext("Thursday")+"</span>",w='<div class="swiper-slide"><span class="my-title">'+i18n.gettext("Friday")+"</span>",x='<div class="swiper-slide"><span class="my-title">'+i18n.gettext("Saturday")+"</span>";server.schedule.query().filter("customer",c).execute().then(function(b){console.log("\u041d\u0430\u0448\u043b\u0438 \u0434\u0430\u043d\u043d\u044b\u0435 \u043f\u043e \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u044e: "+
JSON.stringify(b));for(var c in b){console.log("\u041e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0435\u043c \u043e\u0447\u0435\u0440\u0435\u0434\u043d\u0443\u044e \u0441\u0442\u0440\u043e\u043a\u0443 \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u044f: "+JSON.stringify(b[c]));console.log("scheduleSunday = "+p);var s='<span class="exerciseNameSchedule" data-item="'+b[c].id+'"></span>';"everyday"===b[c].day?(a++,m+=s):"sunday"===b[c].day?(d++,console.log("\u041e\u0447\u0435\u0440\u0435\u0434\u043d\u0430\u044f \u0441\u0442\u0440\u043e\u043a\u0430 \u0432\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u044f: "+
s),p+=s):"monday"===b[c].day?(g++,h+=s):"tuesday"===b[c].day?(f++,r+=s):"wednesday"===b[c].day?(l++,u+=s):"thursday"===b[c].day?(k++,v+=s):"friday"===b[c].day?(e++,w+=s):"saturday"===b[c].day&&(n++,x+=s)}m=0==a?"":m+"</div>";0==d?p="":(p+="</div>",console.log("scheduleSunday = "+p));h=0==g?"":h+"</div>";r=0==f?"":r+"</div>";u=0==l?"":u+"</div>";v=0==k?"":v+"</div>";w=0==e?"":w+"</div>";x=0==n?"":x+"</div>";document.getElementById("swiperSchedule").innerHTML=m+p+h+r+u+v+w+x;myApp.swiper(".swiper-container-schedules",
{pagination:".swiper-pagination",paginationHide:!1,paginationClickable:!0,nextButton:".swiper-button-next",prevButton:".swiper-button-prev"});$$(".exerciseNameSchedule").each(function(a){server.exercise.get(parseInt($$(this).data("item"))).then(function(a){console.log("\u041e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0435\u043c \u0441\u0442\u0440\u043e\u043a\u0443 \u0443\u043f\u0440\u0430\u0436\u043d\u0435\u043d\u0438\u044f: "+JSON.stringify(a));$$('.exerciseNameSchedule[data-item="'+
a.id+'"]').html(a.name)})})})};
